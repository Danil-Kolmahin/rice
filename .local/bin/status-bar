#!/usr/bin/env bash
set -euo pipefail

# TODO: rewrite all

echo '{"version":1}'
echo '['

datetime() {
    date +'%Y-%m-%d %X'
}

while true; do
    STATUS=""

    STATUS+="{\"full_text\":\"Kyiv:+15C(cloudy)\"},"
    STATUS+="{\"full_text\":\"BT:on(1)\"},"
    STATUS+="{\"full_text\":\"NET:inet(↓1MB,↑5MB)\"},"
    STATUS+="{\"full_text\":\"SSD:152GB\"},"
    STATUS+="{\"full_text\":\"RAM:17GB\"},"
    STATUS+="{\"full_text\":\"CPU:6%(73°C)\"},"
    STATUS+="{\"full_text\":\"RBT!\"},"
    STATUS+="{\"full_text\":\"PWR:80%(7:40h)\"},"
    STATUS+="{\"full_text\":\"BRT:40%\"},"
    STATUS+="{\"full_text\":\"VOL:25%\"},"
    STATUS+="{\"full_text\":\"en\"},"
    STATUS+="{\"full_text\":\"$(datetime)\"}"

    echo "[$STATUS],"

    sleep 1
done
