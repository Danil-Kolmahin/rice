#!/usr/bin/env bash
set -euo pipefail

UNICODE_LIST="$HOME/.local/share/unicode-data.txt"

WMENU_OPTS='-N 000000 -n ffffff -M 000000 -m ffffff -S ffffff -s 000000 -i -p "unicode:" -f "IBM Plex Mono 14.5"'

choice=$(awk -F\; '{printf "%s\tU+%s\n", $2, $1}' "$UNICODE_LIST" | wmenu $WMENU_OPTS)

if [ -n "$choice" ]; then
    code=$(echo "$choice" | awk '{print $NF}' | sed 's/U+//')
    symbol=$(printf "%s" "$code" | xxd -r -p)
    printf "%s" "$symbol" # | wl-copy
fi
